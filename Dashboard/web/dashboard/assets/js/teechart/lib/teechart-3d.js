/*
 TeeChart(tm) for JavaScript(tm)
 @fileOverview TeeChart for JavaScript(tm)
 v2.3 Jan 2018
 Copyright(c) 2012-2017 by Steema Software SL. All Rights Reserved.
 http://www.steema.com

 Licensed with commercial and non-commercial attributes,
 specifically: http://www.steema.com/licensing/html5

 JavaScript is a trademark of Oracle Corporation.
*/
var Tee=Tee||{};
(function(){"undefined"!==typeof exports&&(exports.Tee=Tee);Tee.ColorGrid=function(c,E){Tee.PaletteSeries.call(this,c,E);this.dataChanged=this.smooth=!0;var s,u,h,r,A,m,v,f,n,q,w,d,k,t,g,F,G;this.addRandom=function(k,d){var u,h;k=k||200;d=d||k;for(var n=this.data.values=[],m=0;m<k;m++){u=Array(d);n[m]=u;h=Math.cos(m/(.2*d));h*=.5*h;for(var f=0;f<d;f++){var q=u,g=f,c=Math.cos(f/(.2*k));q[g]=c*c-Math.cos(f/(.5*d))+h}}this.dataChanged=!0};this.fillPixels=function(k){for(var d=0,m,f,n=this.palette.grayScale,
c=this.palette.inverted,q=0;q<h;q++){m=s[q];for(var r=0;r<u;r++)n?(f=G*(c?g-m[r]:m[r]-t),A[d++]=f,A[d++]=f,A[d++]=f):(f=this.getColor(m[r]),A[d++]=f.r,A[d++]=f.g,A[d++]=f.b),A[d++]=k}};this.draw=function(){var y=this.chart.ctx;if(0<u){if(!r||m.width!=u||m.height!=h){m||(m=document.createElement("canvas"));if(!m||!m.getContext)return;m.width=u;m.height=h;v=m.getContext("2d");r=v.getImageData(0,0,u,h);A=r.data}this.dataChanged&&(this.fillPixels(255*(1-this.format.transparency)),this.dataChanged=!1);
v.putImageData(r,0,0);var c=this.smooth,g=this.chart.canvas.style;g&&(null!==g.getPropertyValue("image-rendering")&&g.setProperty("image-rendering",c?"optimizeQuality":"optimizeSpeed",null),void 0!==g.msInterpolationMode&&(g.msInterpolationMode=c?"bicubic":"nearest-neighbor"));y.mozImageSmoothingEnabled=c;y.webkitImageSmoothingEnabled=c;f=this.mandatoryAxis;n=this.notmandatory;k=f.calc(-.5);w=f.calc(h-.5);q=n.calc(-.5);d=n.calc(u-.5);var c=this.chart.chartRect,g=q,t=w,s=1,D=1;f.inverted&&(D=-1,t=
c.y-k-w+c.height);n.inverted&&(s=-1,g=c.x-d-q+c.width);y.scale(s,D);y.drawImage(v.canvas,0,0,u,h,g,t,d-q,k-w);c=this.format.stroke;if(""!==c.fill){t=D=1;D=Math.max(1+4*u/Math.abs(n.calc(u)-n.calc(0))|0,1);t=Math.max(1+4*h/Math.abs(f.calc(h)-f.calc(0))|0,1);y.beginPath();for(s=1;s<u;s+=D)g=n.calc(s-.5),y.moveTo(g,k),y.lineTo(g,w);for(s=1;s<h;s+=t)g=f.calc(s-.5),y.moveTo(q,g),y.lineTo(d,g);c.prepare();y.stroke()}}};this.valueText=function(d){return this.data.values[d/u|0][d%u].toFixed(this.decimals)};
this.minXValue=function(){return-.5};this.maxXValue=function(){return u-.5};this.minYValue=function(){return-.5};this.maxYValue=function(){return h-.5};this.recalcAxes=function(){Tee.Series.prototype.recalcAxes.call(this);s=this.data.values;h=s.length;u=0<h?s[0].length:0;this.size={x:u,y:h};if(0<u&&this.dataChanged){g=t=s[0][0];for(var d,k,c=0;c<h;c++){k=s[c];for(var f=0;f<u;f++)d=k[f],d<t?t=d:d>g&&(g=d)}F=g-t;G=g==t?1:255/(g-t);this._min=t;this._max=g;this._range=F;this.prepareColors()}};this.clicked=
function(c){var f;return c.x>=q&&c.x<=d&&(f=u*(c.x-q)/(d-q)|0,c.y>=w&&c.y<=k)?(c=h*(c.y-w)/(k-w)|0,c*u+f):-1}};Tee.ColorGrid.prototype=new Tee.PaletteSeries;Tee.Surface=function(c,E){Tee.ColorGrid.call(this,c,E);var s;this.grid=(new Tee.Format(c)).stroke;this.wireFrame=!1;this.maxZ=3;this.getY=function(c,h){return s[c][h]};this.draw=function(){if(0<this.size.x&&0<this.size.y&&(s=this.data.values,this.chart.__webgl)){var c={};this.bounds(c);this.chart.ctx.surface(this.size,this.getY,c,this.wireFrame,
this.grid.visible?this.grid.fill:null,this.maxZ)}};this.minXValue=function(){return 0};this.maxXValue=function(){return this.size.y};this.minYValue=function(){return this._min};this.maxYValue=function(){return this._max}};Tee.Surface.prototype=new Tee.ColorGrid;THREE.SubdivisionModifier=function(c){this.subdivisions=void 0===c?1:c};THREE.SubdivisionModifier.prototype.modify=function(c){for(var E=this.subdivisions;0<E--;)this.smooth(c);delete c.__tmpVertices;c.computeFaceNormals();c.computeVertexNormals()};
(function(){function c(c,h,r){var s=Math.min(c,h);c=Math.max(c,h);return r[s+"_"+c]}function E(c,h,r,s,m,v){var f=Math.min(c,h),n=Math.max(c,h),q=f+"_"+n;q in s?r=s[q]:(r={a:r[f],b:r[n],newEdge:null,faces:[]},s[q]=r);r.faces.push(m);v[c].edges.push(r);v[h].edges.push(r)}var s=["a","b","c"];THREE.SubdivisionModifier.prototype.smooth=function(u){var h=new THREE.Vector3,r,A,m,v,f,n,q,w,d,k,t;r=u.vertices;A=u.faces;w=Array(r.length);d={};f=0;for(k=r.length;f<k;f++)w[f]={edges:[]};f=0;for(k=A.length;f<
k;f++)n=A[f],E(n.a,n.b,r,d,n,w),E(n.b,n.c,r,d,n,w),E(n.c,n.a,r,d,n,w);k=[];var g,F,G;for(v in d){f=d[v];m=new THREE.Vector3;n=.375;F=.125;G=f.faces.length;2!=G&&(n=.5,F=0);m.addVectors(f.a,f.b).multiplyScalar(n);h.set(0,0,0);for(n=0;n<G;n++){t=f.faces[n];for(q=0;3>q&&(g=r[t[s[q]]],g===f.a||g===f.b);q++);h.add(g)}h.multiplyScalar(F);m.add(h);f.newEdge=k.length;k.push(m)}var y,K;t=[];v=0;for(f=r.length;v<f;v++){q=r[v];G=w[v].edges;m=G.length;3==m?y=.1875:3<m&&(y=3/(8*m));g=1-m*y;F=y;2>=m&&2==m&&(g=
.75,F=.125);K=q.clone().multiplyScalar(g);h.set(0,0,0);for(n=0;n<m;n++)g=G[n],g=g.a!==q?g.a:g.b,h.add(g);h.multiplyScalar(F);K.add(h);t.push(K)}h=t.concat(k);w=t.length;r=[];v=0;for(f=A.length;v<f;v++)t=A[v],y=c(t.a,t.b,d).newEdge+w,g=c(t.b,t.c,d).newEdge+w,k=c(t.c,t.a,d).newEdge+w,r.push(new THREE.Face3(y,g,k)),r.push(new THREE.Face3(t.a,y,k)),r.push(new THREE.Face3(t.b,g,y)),r.push(new THREE.Face3(t.c,k,g));u.vertices=h;u.faces=r}})();Tee.MyParametricGeometry=function(c,E,s,u){THREE.Geometry.call(this);
var h=this.vertices,r=this.faces,A=this.faceVertexUvs[0];u=void 0===u?!1:u;var m,v,f=E+1,n=1/E,q=1/f,w=1/s,d=1/(s+1);for(m=0;m<=s;m++)for(v=0;v<=E;v++)h.push(new THREE.Vector3(m*w-.5,c(m,v),.5-v*n));var k,t,g,F,G,y,K,N;for(m=0;m<s;m++)for(G=m*d,y=(m+1)*d,K=m*f,N=(m+1)*f,v=0;v<E;v++)c=K+v,h=N+v,g=v*q,k=g+q,n=new THREE.Vector2(g,G),w=new THREE.Vector2(k,G),g=new THREE.Vector2(g,y),F=new THREE.Vector2(k,y),u?(k=c+1,t=h+1,r.push(new THREE.Face3(c,k,h)),r.push(new THREE.Face3(k,t,h)),A.push([n,w,g]),A.push([w,
F,g])):(r.push(new THREE.Face4(c,c+1,h+1,h)),A.push([n,w,F,g]));this.computeFaceNormals();this.computeVertexNormals()};"undefined"!==typeof THREE&&(Tee.MyParametricGeometry.prototype=new THREE.Geometry);var P="undefined"!==typeof HTMLCanvasElement;Tee.Three=function(c){function E(a,b,e,p,z,l,c,d){a&&(b=new THREE.MeshBasicMaterial({vertexColors:THREE.VertexColors}),b.wireframe=a);b.vertexColors=THREE.VertexColors;a||(b.side=THREE.DoubleSide);a=new THREE.Mesh(z,b);z=d-c;d===c&&(z=1);d=p.height/z;a.position.set(p.x+
.5*(p.width-C),p.y+.5*(p.height-B)-(c+.5*z)*d,.5*-q);a.scale.set(p.width,d,q*l);k.add(a)}function s(a){L.extrudeOptions.amount=q*L.depth;a=0==L.depth?new THREE.ShapeGeometry(a):a.extrude(L.extrudeOptions);a=THREE.SceneUtils.createMultiMaterialObject(a,[L.getMaterial()]);L.showShadows&&(a.receiveShadow=!0,a.castShadow=!0);return a}function u(a,b,e,p,z,l){a.moveTo(b,e+l);a.lineTo(b,e+z-l);a.quadraticCurveTo(b,e+z,b+l,e+z);a.lineTo(b+p-l,e+z);a.quadraticCurveTo(b+p,e+z,b+p,e+z-l);a.lineTo(b+p,e+l);a.quadraticCurveTo(b+
p,e,b+p-l,e);a.lineTo(b+l,e);a.quadraticCurveTo(b,e,b,e+l)}function h(a){if("rgb("==a.substr(0,4))return a=a.slice(4,a.length-1).split(","),a[2]|a[1]<<8|a[0]<<16;switch(a){case "white":return 16777215;case "silver":return 14737632;case "darkgray":case "darkgrey":return 8421504;case "black":return 0;case "red":return 16711680;case "green":return 65280;case "blue":return 255;default:return 16777215}}function r(a,b){var e,p=O.length,z;for(e=0;e<p;e++)if(z=O[e],z.text===a&&z.size===b)return z.obj;return null}
function A(a,b){var e=D;e.width=a;e.height=b;x.setSize(a,b);H.aspect=a/b;H.updateProjectionMatrix()}function m(){f?(A(n.width,n.height),f=!1):(n.width=D.width,n.height=D.height,A(window.innerWidth,window.innerHeight),f=!0);L.refresh()}this.setEnabled=function(a,b){if(!a||!Detector||Detector.webgl){if(this.__webgl=a)x&&(b.__webgl=!0,b.canvas.style.display="none",b.canvas=this,b.ctx=this,x&&x.domElement&&(x.domElement.style.display="block"));else{var e=D;d||(P?(d=document.createElement("canvas"),e instanceof
HTMLCanvasElement?(e.parentElement.appendChild(d),d.style.background=e.style.background):e.appendChild(d)):"undefined"!=typeof G_vmlCanvasManager&&(d=document.createElement("canvas"),d=G_vmlCanvasManager.initElement(d),e.appendChild(d)));d&&(d.setAttribute("width",e.width),d.setAttribute("height",e.height),d.height=e.clientHeight,d.width=e.clientWidth);x&&x.domElement?x.domElement.style.display="none":P&&e instanceof HTMLCanvasElement&&(e.style.display="none");d&&(d.style.display="block");b.canvas=
d;b.ctx=null;b.__webgl=null;b.bounds.set(0,0,d.width,d.height);d&&(d.chart=b,d.onmousedown=d.ontouchstart=b.domousedown,d.onmouseup=d.ontouchstop=b.domouseup,d.onmousemove=d.ontouchmove=b.domousemove,d.onmousewheel=d.onmousewheel=b._doWheel)}I&&(I.enabled=a);b.aspect.view3d=a;b.draw()}};this.zPos=function(){return q*(1-this.z-.5*this.depth)};this.Gradient=function(){this.colors=[];this.stops=[];this.addColorStop=function(a,b){this.stops.push(a);this.colors.push(b)}};this.clearRect=function(){k&&J.remove(k);
k=new THREE.Object3D;J.add(k);this.needsRender=!0};this.beginPath=function(){this.items=[];this.closedPath=!1};this.moveTo=function(a,b,e){this.items.push({kind:0,x:a,y:b,z:e})};this.lineTo=function(a,b,e){this.items.push({kind:1,x:a,y:b,z:e})};this.lineZ=function(a,b,e,p){this.moveTo(a,b,e);this.lineTo(a,b,p)};this.surface=function(a,b,e,p,z,l){b=new Tee.MyParametricGeometry(b,a.x-1,a.y-1,!0);b.computeBoundingBox();var c=b.boundingBox,d=c.min.y,c=c.max.y,k=c-d,f,g,h=["a","b","c","d"],m=b.vertices;
for(g=0;g<b.vertices.length;g++){f=new THREE.Color;var n=.7*(c-m[g].y)/k;f.setHSL(n,.9/(1>(n=.9)?n:2-n),.5*n);b.colors[g]=f}for(g=0;g<b.faces.length;g++)for(k=b.faces[g],f=0;3>f;f++)k.vertexColors[f]=b.colors[k[h[f]]];g=new THREE.MeshLambertMaterial({color:16777215,opacity:this.globalAlpha,wireframe:this.wireframe});E(p,g,a,e,b,l,d,c);z&&!p&&(p=new THREE.MeshBasicMaterial({color:this.colorToInt(z),opacity:this.globalAlpha}),p.wireframe=!0,E(!1,p,a,e,b,l,d,c))};this.slice=function(a,b,e,p,z,c,d,f){this.beveled=
void 0===f?!1:f;0<c?(this.path=8,this.p=a,this.torus=d,this.center=b,this.radius=e,this.angle0=p,this.angle1=z,this.donut=c,this.items=[]):(this.beginPath(),this.moveTo(a.x,a.y),this.arc(b.x,b.y,e,p,z,!1),this.closePath())};this.closePath=function(){this.closedPath=!0};this.createLinearGradient=function(){return new this.Gradient};this.createRadialGradient=function(){return new this.Gradient};var v;this.getMaterial=function(a){var b=this.fillStyle;return a?(v||(v=THREE.ImageUtils.loadTextureCube("textures/pisa/px.png textures/pisa/nx.png textures/pisa/py.png textures/pisa/ny.png textures/pisa/pz.png textures/pisa/nz.png".split(" "),
null,function(){L.refresh()})),new THREE.MeshBasicMaterial({color:16777215,envMap:v})):new THREE.MeshPhongMaterial({color:this.colorToInt(b),opacity:this.globalAlpha,wireframe:this.wireframe,specular:5592405,map:null})};this.spline=function(a,b){this.items=[];var e=this.path=0;if(b){for(var p=[];e<a.length;)p.push(new THREE.Vector2(a[e],-a[e+1])),e+=2;this.items.push({kind:12,p:p})}else{for(p=new THREE.SplineCurve3;e<a.length;)p.points.push(new THREE.Vector3(a[e],-a[e+1],0)),e+=2;this.items.push({kind:8,
geo:p})}};this.bezierCurveTo=function(a,b,e,p,c,l){this.items.push({kind:11,a:a,b:b,c:e,d:p,e:c,f:l})};this.quadraticCurveTo=function(a,b,e,p){this.items.push({kind:7,x:a,y:b,width:e,height:p})};this.arc=function(a,b,e,p,c,l){this.items.push({kind:4,x:a,y:b,radius:e,angle:p,endAngle:c,clockwise:l})};this.extrudeOptions={amount:1,bevelEnabled:!1,bevelSegments:16,steps:12,curveSegments:64,bevelThickness:10,bevelSize:8};this.getContext=function(){return this};this.beginParent=function(){t=k;k=new THREE.Object3D;
t.add(k);return k};this.endParent=function(){k=t};this.translate=function(a,b){};this.rotate=function(a){};this.fill=function(){var a,b;b=L.getMaterial();var e=this.items,p=e.length,c=this.r;if(0<p)if(8==e[0].kind)e=new THREE.TubeGeometry(e[0].geo,100,.05*q*this.depth,8,!1,!1),b=new THREE.Mesh(e,b),b.position.set(.5*-C,.5*B,this.zPos()),k.add(b);else if(this.closedPath){b=new THREE.Shape;for(var l,d,f,g=0;g<p;g++)if(l=e[g],0==l.kind){if(0==g||d!==l.x||f!==-l.y)d=l.x,f=-l.y,b.moveTo(d,f)}else if(1==
l.kind){if(0==g||d!==l.x||f!==-l.y)d=l.x,f=-l.y,b.lineTo(d,f)}else 4==l.kind?b.absarc(d,f,l.radius,2*Math.PI-l.angle,2*Math.PI-l.endAngle,l.clockwise):7==l.kind?b.quadraticCurveTo(l.x,l.y,l.width,l.height):11==l.kind?b.bezierCurveTo(l.a,-l.b,l.c,-l.d,l.e,-l.f):12==l.kind&&(b.moveTo(l.p[0].x,l.p[0].y),b.splineThru(l.p));e=this.extrudeOptions.bevelEnabled;if(this.extrudeOptions.bevelEnabled=this.beveled)p=.02*this.extrudeOptions.bevelSize,this.depth-=p,this.z+=.5*p;b=s(b);b.position.set(.5*-C,.5*B,
this.zPos()-q*this.depth*.5);k.add(b);this.extrudeOptions.bevelEnabled=e}else{f=new THREE.Geometry;d=-q*this.depth;b.side=THREE.DoubleSide;for(g=0;g<p;g++)f.vertices.push(new THREE.Vector3(e[g].x,-e[g].y,0),new THREE.Vector3(e[g].x,-e[g].y,d)),0<g&&(l=new THREE.Face4(2*(g-1),2*g-1,2*g+1,2*g),f.faces.push(l));f.computeFaceNormals();b=new THREE.Mesh(f,b);b.position.set(.5*-C,.5*B,this.zPos()-.5*d);k.add(b)}else 0==this.depth?0<this.rx?(b=new THREE.Shape,u(b,c.x,-c.y,c.width,c.height,this.rx),b=s(b),
b.position.set(.5*-C,-c.height+.5*B,this.zPos()),k.add(b)):6==this.path?(b=new THREE.Shape,b.absellipse(0,0,.5*c.width,.5*c.height,0,2*Math.PI,!0),b=s(b),b.position.set(this.cx-.5*C,-this.cy+.5*B,this.zPos()),k.add(b)):(a=new THREE.PlaneGeometry(c.width,c.height),b.side=THREE.DoubleSide,a=new THREE.Mesh(a,b)):5==this.path?(1==this.topRadius?(F||(F=new THREE.CylinderGeometry(1,1,1,32,1)),a=F):(G||(G=new THREE.CylinderGeometry(0,1,1,32,1)),a=G),a=new THREE.Mesh(a,b),b=.5*Math.min(this.vertical?c.width:
c.height,q),a.scale.x=b,a.scale.z=b,a.scale.y=this.vertical?c.height:c.width,this.vertical||(a.rotation.z=.5*Math.PI,a.rotation.y=Math.PI)):7==this.path?(N||(N=new THREE.SphereGeometry(1,32,32)),a=new THREE.Mesh(N,b),a.scale.set(.5*c.width,.5*c.height,q*this.depth)):6==this.path?(b=new THREE.Shape,b.absellipse(0,0,.5*c.width,.5*c.height,0,2*Math.PI,!0),b=s(b),b.position.set(this.cx-.5*C,-this.cy+.5*B,this.zPos()),k.add(b)):8==this.path?(this.angle0=2*Math.PI-this.angle0,this.angle1=2*Math.PI-this.angle1,
this.torus?(e=Math.abs(this.angle1-this.angle0),p=Math.max(16,90*Math.PI/e|0),e=new Tee.TorusGeometry(this.radius-.5*this.donut,.5*this.donut,16,p,e),b=new THREE.Mesh(e,b),b.position.set(this.center.x-.5*C,-this.center.y+.5*B,this.zPos()+this.donut),b.rotation.z=this.angle1,k.add(b)):(b=new THREE.Shape,b.moveTo(this.p.x,this.p.y),b.absarc(this.center.x,this.center.y,this.radius,this.angle0,this.angle1,!0),b.absarc(this.center.x,this.center.y,this.donut,this.angle0,this.angle1,!1),e=this.extrudeOptions.bevelEnabled,
this.extrudeOptions.bevelEnabled=this.beveled,b=s(b),b.position.set(.5*-C,.5*-B,this.zPos()),k.add(b),this.extrudeOptions.bevelEnabled=e)):(1===w?(y||(y=new THREE.BoxGeometry(1,1,1)),a=y):(K||(K=new THREE.BoxGeometry(1,1,1,w,w,w),(new THREE.SubdivisionModifier(2)).modify(K)),a=K),a=new THREE.Mesh(a,b),a.scale.set(c.width,c.height,q*this.depth));a&&(a.position.set(c.x+.5*c.width-.5*C,-(c.y+.5*c.height)+.5*B,this.zPos()),this.showShadows&&(a.receiveShadow=!0,a.castShadow=!0),k.add(a))};this.setLineDash=
function(a){this.dash=a};this.lineMaterial=function(){var a;a={color:this.colorToInt(this.strokeStyle),opacity:this.globalAlpha};this.dash&&0<this.dash.length?(a=new THREE.LineDashedMaterial(a),a.dashSize=3,a.gapSize=1):(a=new THREE.LineBasicMaterial(a),a.linecap=this.cap,a.linejoin=this.join);a.linewidth=this.lineWidth;return a};this.polygon=function(a,b){var e,c=a.length,d,l,f=new THREE.Shape;f.moveTo(a[0].x,-a[0].y);for(e=1;e<c;e++)d=a[e],f.lineTo(d.x,-d.y);l=f.makeGeometry();""!==b.fill&&(this.fillStyle=
b.fill,0<this.depth?e=s(f):(d=this.getMaterial(),e=new THREE.Mesh(l,d),this.wireFrame||(d.side=THREE.DoubleSide)),l=q*(1-this.z),e.position.set(.5*-C,.5*B,l-.5*this.depth),this.showShadows&&(e.castShadow=!0),k.add(e));if(""!==b.stroke.fill){l=new THREE.Geometry;for(e=0;e<c;e++)d=a[e],l.vertices.push(new THREE.Vector3(d.x,-d.y,0));c=new THREE.Line(l,this.lineMaterial());l=q*(1-this.z+this.depth);c.position.set(.5*-C,.5*B,l);k.add(c)}};this.stroke=function(){var a=this.items.length,b=this.lineMaterial(),
e;if(0<a){var c,d;d=new THREE.Geometry;for(var f=0;f<a;f++)c=this.items[f],e=void 0===c.z?this.z:c.z,e=q*(1-e),0==c.kind?(0<d.vertices.length&&(d=new THREE.Line(d,b),k.add(d)),d=new THREE.Geometry,d.vertices.push(new THREE.Vector3(c.x-.5*C,-c.y+.5*B,e))):1==c.kind&&d.vertices.push(new THREE.Vector3(c.x-.5*C,-c.y+.5*B,e));0<d.vertices.length&&(d=new THREE.Line(d,b),k.add(d))}else 0==this.depth&&(a=new THREE.Path,e=this.r,0==this.path||1==this.path?0<this.rx?u(a,e.x,-e.y-e.height,e.width,e.height,this.rx):
(a.moveTo(e.x,-e.y-e.height),a.lineTo(e.x+e.width,-e.y-e.height),a.lineTo(e.x+e.width,-e.y),a.lineTo(e.x,-e.y)):6==this.path&&a.absellipse(this.cx,-this.cy,.5*e.width,.5*e.height,0,2*Math.PI,!0),d=new THREE.Line(a.createPointsGeometry(),b),d.position.set(.5*-C,.5*B,this.zPos()),k.add(d))};this.measureText=function(a){return{width:1.4*R.measureText(a).width}};this.roundRect=function(a,b,e,c,d,f){this.path=0;this.r={x:a,y:b,width:e,height:c};this.depth=0;this.rx=d;this.ry=f};this.rect=function(a,b,
e,c){this.path=0;this.r={x:a,y:b,width:e,height:c};this.ry=this.rx=this.depth=0};this.cube=function(a,b){this.path=1;this.r=a;this.items=[];w=0<b?6:1};this.sphere=function(a,b,e,c){g||(g=new THREE.SphereGeometry(1,32,32));var d=new THREE.Mesh(g,this.getMaterial());d.position.set(a-.5*C,-b+.5*B,this.zPos());d.scale.set(.5*e,.5*c,.5*Math.min(e,q));k.add(d)};this.save=function(){};this.clip=function(){};this.restore=function(){};this.colorToInt=function(a){a=a instanceof this.Gradient?a.colors[a.colors.length-
1]:a;return"#"==a.substr(0,1)?parseInt(a.substr(1),16):h(a)};this.pyramid=function(a,b){var c=[new THREE.Vector3(100,0,0),new THREE.Vector3(0,100,0),new THREE.Vector3(0,0,100),new THREE.Vector3(0,0,0)];new THREE.ConvexGeometry(c)};this.ellipsoid=function(a,b){this.path=7;this.r=a;this.vertical=b;this.items=[]};this.cylinder=function(a,b,c){this.path=5;this.r=a;this.topRadius=b;this.vertical=c;this.items=[]};this.ellipsePath=function(a,b,c,d){this.path=6;this.cx=a;this.cy=b;this.r={x:a,y:b,width:c,
height:d};this.items=[]};this.addLight=function(a,b,c,d,f,g){a=new a(b);a.position.set(c,d,f);a.shadowsEnabled=g;this.showShadows&&g&&(a instanceof THREE.SpotLight||a instanceof THREE.DirectionalLight)&&(a.castShadow=!0);J.add(a);this.lights.push(a);return a};this.fillText=function(a,b,c){if(""!==a){var d;a:{d=this.font.split(" ");var f,g;for(f=0;f<d.length;f++)if(g=parseFloat(d[f])){d=g;break a}d=20}g=r(a,d);f=0;g||(g=new THREE.TextGeometry(a,{size:d,height:this.textDepth,curveSegments:2,font:"helvetiker"}),
g.computeBoundingBox(),O.push({text:a,obj:g,size:d}));var h=r("Wj",d);h||(h=new THREE.TextGeometry("Wj",{size:d,height:this.textDepth,curveSegments:2,font:"helvetiker"}));h.computeBoundingBox();a=h.boundingBox;O.push({text:"Wj",obj:h,size:d});h=g.boundingBox;h=h.max.x-h.min.x;a=a.max.y-a.min.y;if("center"===this.textAlign)f=-.5*h;else if("right"===this.textAlign||"end"===this.textAlign)f=-h;h=new THREE.MeshLambertMaterial({color:this.colorToInt(this.fillStyle),opacity:this.globalAlpha,overdraw:!1});
g=new THREE.Mesh(g,h);h="top"===this.textBaseline?a:"middle"==this.textBaseline?.5*a:0;g.position.x=b+f-.5*C;g.position.y=-c+.5*B-h+(a-d);g.position.z=1+q*(1-this.z);g.rotation.x=0;g.rotation.y=2*Math.PI;k.add(g)}};this.update=function(){this.__webgl&&(I&&I.enabled&&I.update(1),this.needsRender&&(this.hitTest&&this.doHitTest(),this.doRender()))};this.setCamera=function(a){H&&J.remove(H);this.camera=H=a?new THREE.PerspectiveCamera(45,window.innerWidth/window.innerHeight,.1,1E4):new THREE.OrthographicCamera(-window.innerWidth/
2,window.innerWidth/2,window.innerHeight/2,-window.innerHeight/2,.1,1E4);H.lookAt(J.position);H.position.set(0,0,800);I&&(I.object=H);this.refresh()};this.refresh=function(){this.needsRender=!0;this.update()};this.createTrackball=function(){x&&"undefined"!==typeof THREE.TrackballControls&&(I=this.trackBall=new THREE.TrackballControls(H,x.domElement),I.enabled=!0,I.keys=[65,83,68],I.dynamicDampingFactor=.2,-1<("undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"").indexOf("mac os x")&&
(I.zoomSpeed=.1),I instanceof THREE.TrackballControls&&I.addEventListener("change",function(){L.needsRender=!0}))};var f,n={};document.addEventListener("fullscreenchange",m,!1);document.addEventListener("mozfullscreenchange",m,!1);document.addEventListener("webkitfullscreenchange",m,!1);this.fullScreen=function(){var a=D,b=a.requestFullscreen||a.mozRequestFullscreen||a.webkitRequestFullscreen||a.msRequestFullScreen;b&&b.call(a)};this.onWindowResize=function(){H instanceof THREE.PerspectiveCamera&&
(H.aspect=window.innerWidth/Math.max(1,window.innerHeight));H.updateProjectionMatrix();x&&x.setSize(window.innerWidth,window.innerHeight)};this.setShowShadows=function(a){this.showShadows=a;var b;for(a=0;a<this.lights.length;a++)b=this.lights[a],(b instanceof THREE.SpotLight||b instanceof THREE.DirectionalLight)&&b.shadowsEnabled&&(b.castShadow=this.showShadows);Q.receiveShadow=this.showShadows;x&&(x.shadowMapEnabled=this.showShadows,x.shadowMapType=THREE.PCFSoftShadowMap,this.showShadows&&(x.shadowMapAutoUpdate=
!0))};this.setShowLights=function(a){this.showLights=a;var b,c=this.lights.length,d;for(b=0;b<c;b++)if(d=this.lights[b],d.__helper)a=d.visible&&this.showLights,d.__helper.traverse(function(b){b.visible=a});else if(this.showLights){if(d instanceof THREE.SpotLight)d.__helper=new THREE.SpotLightHelper(d,16,100);else if(d instanceof THREE.PointLight)d.__helper=new THREE.PointLightHelper(d,16);else if(d instanceof THREE.DirectionalLight)d.__helper=new THREE.DirectionalLightHelper(d,16,100);else continue;
J.add(d.__helper)}this.needsRender||this.refresh()};this.showLight=function(a,b){var c=this.lights[a];c.visible=b;c.__helper&&(b=b&&this.showLights,c.__helper.traverse(function(a){a.visible=b}));this.refresh()};this.doHitTest=function(){};this.doRender=function(){x&&(x.render(J,H),x.shadowMapAutoUpdate=!1,M&&M.visible&&M.update());this.needsRender=!1};this.clearTextCache=function(){O=[]};this.toogle=function(a,b){a.visible=b;a.visual?(a.visual.traverse(function(a){a.visible=b}),this.needsRender=!0):
a.chart.draw();this.update()};this.isEnabled=function(){return this.__webgl};this.__webgl="undefined"===typeof Detector||Detector&&Detector.webgl;this.needsRender=!0;var q=200;this.showShadows=this.showLights=!1;this.items=[];this.closedPath=!1;this.textDepth=this.z=0;this.beveled=!1;var w=1,d,k;this.wireframe=!1;this.globalAlpha=1;var t,g,F,G,y,K,N,L=this,O=[],D=document.getElementById(c),C=D.clientWidth,B=D.clientHeight,J,H,x;c=null;P&&D instanceof HTMLCanvasElement&&(c=D);this.__webgl&&(J=new THREE.Scene,
x=new THREE.WebGLRenderer({antialias:!0,canvas:c,clearAlpha:1}));var R=null;P&&(R=document.createElement("canvas").getContext("2d"));this.width=C;this.height=B;this.camera=H;this.scene=J;(this.renderer=x)?x.sortObjects=!1:this.__webgl=!1;var M=this.stats=null;document.addEventListener&&"undefined"!==typeof Stats&&(M=this.stats=new Stats,M.visible=!0,M.setVisible=function(a){M.visible=a;M.domElement.style.display=a?"block":"none"});x&&(x.setSize(C,B),this.showShadows&&(x.shadowMapEnabled=!0,x.shadowMapSoft=
!0));c="#AAAA77";window.getComputedStyle&&(c=window.getComputedStyle(D).backgroundColor);x&&(x.setClearColor(this.colorToInt(c)),D!==x.domElement&&D.appendChild(x.domElement));this.lights=[];if(x){this.addLight(THREE.SpotLight,12303291,-300,300,400,!0);this.addLight(THREE.DirectionalLight,8947848,400,1800,1600,!1);this.addLight(THREE.PointLight,8947848,500,120,-500,!1);this.setShowLights(this.showLights);c=this.ambientLight=new THREE.AmbientLight(2236962);c.visible=!1;J.add(c);c=this.hemiLight=new THREE.HemisphereLight(16777215,
16777215,.5);c.position.y=500;c.visible=!1;J.add(c);var Q=this.floor=new THREE.Mesh(new THREE.CylinderGeometry(4E3,4E3,50,32,1),new THREE.MeshLambertMaterial({color:this.colorToInt("silver"),map:null,opacity:.9,transparent:!0}));this.showShadows&&(Q.receiveShadow=!0);Q.position.y=-20-.5*B;J.add(Q);var I=this.trackBall=null;this.setCamera(!0);this.createTrackball()}this.needsRender=!0}}).call(this);
